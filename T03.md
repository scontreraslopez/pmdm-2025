# T03-Android Studio: Primeros pasos

## √çndice

- [Introducci√≥n](#introducci√≥n)
- [Descarga e instalaci√≥n](#descarga-e-instalaci√≥n)
- [Diferencias entre interfaces imperativa y declarativa](#diferencias-entre-interfaces-imperativa-y-declarativa)
  - [Enfoque Imperativo](#enfoque-imperativo)
  - [Enfoque Declarativo](#enfoque-declarativo)
  - [Comparaci√≥n](#comparaci√≥n)
  - [Resumen](#resumen)
- [Android Studio: Crea y ejecuta tu primera app para Android](#android-studio-crea-y-ejecuta-tu-primera-app-para-android)
- [Depurar apps en dispositivo f√≠sico](#depurar-apps-en-dispositivo-f√≠sico)
  - [Ejercicio 1](#ejercicio-1)
    - [Pasos en el m√≥vil (Ejemplo MIUI / XIAMOI) üì≤](#pasos-en-el-m√≥vil-ejemplo-miui--xiamoi-)
    - [Pasos en Android Studio üíª (Pendiente Verificar)](#pasos-en-android-studio--pendiente-verificar)
  - [Ejercicio 2](#ejercicio-2)
  - [Ejercicio 3](#ejercicio-3)
  - [Ejercicio 4](#ejercicio-4)
  - [Ejercicio 5](#ejercicio-5)

## Introducci√≥n

Para el desarrollo nativo de aplicaciones en Android tenemos un IDE espec√≠fico para tal tarea. Es gratuito y est√° basado en IntelliJ. Tenemos versi√≥n de instalaci√≥n para macOS, Windows y Linux. Se trata de **Android Studio**. ü§ñ

Vamos a seguir una serie de tutoriales de Google para introducirnos en Android Studio:
[https://developer.android.com/courses/pathways/android-basics-compose-unit-1-pathway-2](https://developer.android.com/courses/pathways/android-basics-compose-unit-1-pathway-2)

Paralelamente, ir a√±adiendo [https://developer.android.com/develop/ui/compose/documentation](https://developer.android.com/develop/ui/compose/documentation) a vuestros favoritos porque os va a ser de gran ayuda para explorar las posibilidades de Jetpack Compose.

## Descarga e instalaci√≥n

No hay complicaciones para la instalaci√≥n. S√≠ que es necesario tener una m√°quina relativamente potente, pues la emulaci√≥n de un dispositivo Android no es balad√≠. Se recomienda tener al menos 8Gb de RAM y un disco SSD.

Las versiones m√°s recientes de Android Studio ya incluyen un JDK (Java Development Kit). Si por alguna raz√≥n no lo detecta, el propio instalador te guiar√° para descargar e instalar una versi√≥n compatible, por lo que no es necesaria una instalaci√≥n previa.

Para completar este paso puedes apoyarte en el siguiente codeLab de Google:
[https://developer.android.com/codelabs/basic-android-kotlin-compose-install-android-studio?hl=es-419\#0](https://www.google.com/search?q=https://developer.android.com/codelabs/basic-android-kotlin-compose-install-android-studio%3Fhl%3Des-419%230)

> [!NOTE]
> Siempre hay que tener en cuenta que la versi√≥n de los manuales en castellano puede estar desactualizada y puede ser conveniente seguir a la versi√≥n en ingl√©s.

Una cosa interesante es que en Android Studio code podemos activar el soft-wrap es decir, que las l√≠neas largas se ajusten al ancho de la ventana. Esto se hace en:
`Control + Shift + A` y escribimos soft-wrap. Con esto tenemos un toggle para activar o desactivar esta opci√≥n. Active Editor : Soft-Wrap

![Activar soft-wrap](img/T03/softWrapOn.png)

## Diferencias entre interfaces imperativa y declarativa

En el dise√±o de interfaces de usuario y de programaci√≥n, los enfoques declarativo e imperativo son dos paradigmas que definen c√≥mo se describe el comportamiento y la l√≥gica en el desarrollo de software y definici√≥n de la interface de usuario.

![Comparativa Imperativo vs Declarativo](img/T03/imperativo_declarativo_140040.png)

### Enfoque Imperativo

En el dise√±o imperativo, el desarrollador define expl√≠citamente **c√≥mo** se debe hacer algo, es decir, el paso a paso para lograr un resultado. Se trata de una secuencia de instrucciones que el sistema sigue de manera estricta para cambiar su estado y cumplir con la funcionalidad deseada.

```kotlin
// IMPERATIVE (How)
fun sum(arr: Array<Int>) {
    var result = 0
    for (i in 0 until arr.size) {
        result += arr[i]
    }
    return result
}
```

### Enfoque Declarativo

En el dise√±o declarativo, el desarrollador se enfoca en **qu√©** se quiere lograr, dejando que el sistema subyacente se encargue de los detalles sobre c√≥mo hacerlo. No se proporciona una secuencia de pasos detallados, sino una descripci√≥n del resultado final deseado.

```kotlin
// DECLARATIVE (What)
fun sum(arr: Array<Int>): Int {
    return arr.reduce { acc, item ->
        acc + item
    }
}
```

### Comparaci√≥n

| Aspecto | Imperativo | Declarativo |
| :--- | :--- | :--- |
| **Enfoque** | C√≥mo hacer algo (paso a paso) | Qu√© hacer o cu√°l es el estado deseado |
| **Control** | Detallado sobre el flujo y el estado | Se delega al sistema o framework |
| **Uso de estado**| El programador maneja directamente el estado | El sistema maneja el estado autom√°ticamente |
| **Facilidad de mantenimiento**| Puede ser m√°s dif√≠cil de mantener | Suele ser m√°s sencillo y conciso |
| **Ejemplo de UI**| Swing, AWT | Jetpack Compose, React |

### Resumen

- **Imperativo:** el programador dicta exactamente c√≥mo se deben ejecutar los pasos.
- **Declarativo:** el programador describe el resultado, dejando que el sistema lo gestione.

El enfoque declarativo es cada vez m√°s popular en lenguajes modernos por su simplicidad y capacidad de reducir el c√≥digo repetitivo.

-----

## Android Studio: Crea y ejecuta tu primera app para Android

Vamos a crear nuestra primera app y c√≥mo podemos lanzarla en un emulador o en nuestro m√≥vil real (si es Android). Para ello, seguiremos el siguiente codeLab: [https://developer.android.com/codelabs/basic-android-kotlin-compose-first-app](https://developer.android.com/codelabs/basic-android-kotlin-compose-first-app)

Llama al proyecto **Ejercicio1** y en el nombre del paquete indica `net.iesochoa` + `tu nombre`.

![package_name](img/T03/activity_195722.png)

> [!WARNING]
> Ten en cuenta que la plantilla que te crear√° Android Studio en la versi√≥n actual es diferente a la que se muestra en el codelab.

![Resultado final Hello Meghan](img/T03/Hello_Meghan.png)

## Depurar apps en dispositivo f√≠sico

Si no ten√©is un ordenador muy potente, el emulador de Android es una de las partes que m√°s recursos consumen. Una opci√≥n m√°s ligera puede ser ejecutar la app en nuestro tel√©fono m√≥vil.

Tenemos el siguiente codeLab que nos explica c√≥mo hacerlo mediante cable USB:
[Codelab connect your Android Device](https://developer.android.com/codelabs/basic-android-kotlin-compose-connect-device#0)

> [!NOTE]
> Es posible que los codeLabs no trabajen con las √∫ltimas versiones de Android Studio. En la documentaci√≥n oficial encontraremos los detalles de las √∫ltimas versiones: [https://developer.android.com/studio/run](https://developer.android.com/studio/run).

Para instalar el emulador, puedes seguir los pasos de este v√≠deo:
[Crear un emulador en Android Studio de forma correcta y r√°pida.](https://www.youtube.com/watch?v=lhTbyjzujAE)

-----

## Entrega de ejercicios

Para la entrega, dentro de vuestra organizaci√≥n de GitHub, crear√©is un repo privado para cada una de los ejercicios. El nombre del repo deber√°s ser
T03-EjercicioX siendo X el n√∫mero del ejercicio.

**Trucazo**: Para crear repos como un misil, considera instalar **GitHub CLI**, as√≠ desde l√≠nea de comandos puedes crearlos sin pasar por la web.
`gh repo create ORG_NAME/REPO_NAME --private --source=. --remote=origin --push`

### Ejercicio 1

Ejecuta tu primera app en un emulador o dispositivo f√≠sico siguiendo el codeLab. Llama a tu proyecto "Ejercicio1".

- Haz una captura de pantalla del emulador con la app arrancada. ¬°No confundir el emulador con el preview de Compose!
- Intenta ejecutarlo en tu dispositivo f√≠sico por USB o Wifi como pr√°ctica **opcional**.

> [!NOTE]
> Para este Ejercicio 1 no es preciso que entregues nada. Simplemente para validar que puedes hacerlo bien.
> 
-----

Nota, para poder conectaros con el m√≥vil debe estar activada la **Depuraci√≥n USB** y opcionalmente la **Depuraci√≥n inal√°mbrica** en las **Opciones de desarrollador**.

Esto cambia de m√≥vil a m√≥vil pero, para las opciones de desarrollador hay que ir a "Ajustes > Sobre el tel√©fono" y pulsar varias veces sobre "Versi√≥n del sistema operativo" o "N√∫mero de compilaci√≥n" (depende del fabricante). Tendr√°s que pulsar unas 7 veces y aparecer√° finalmente un mensaje indicando que "¬°Ahora eres desarrollador!". Vuelve atr√°s y entra en Ajustes adicionales > Opciones de desarrollador.

Finalmente deber√°s emparejar el dispositivo con tu PC usando **ADB** (Android Debug Bridge). ADB es una herramienta de l√≠nea de comandos que permite la comunicaci√≥n con un dispositivo Android. Se incluye con Android Studio y el SDK de Android.

-----

#### Pasos en el m√≥vil (Ejemplo MIUI / XIAMOI) üì≤

1. **Activa las Opciones de desarrollador** (si no lo has hecho):
   - Ajustes ‚Üí Sobre el tel√©fono ‚Üí toca 7 veces en *Versi√≥n de MIUI*.
2. Ve a **Ajustes adicionales** ‚Üí **Opciones de desarrollador**.
3. Activa:
   - **Depuraci√≥n USB** (s√≠, aunque sea por Wi‚ÄëFi, es requisito previo).
   - **Depuraci√≥n inal√°mbrica** (*Wireless debugging*).
4. Dentro de **Depuraci√≥n inal√°mbrica**, elige:
   - **Emparejar dispositivo con c√≥digo de emparejamiento**  
     o  
   - **Emparejar dispositivo con c√≥digo QR** (Android Studio lo muestra).

 Aseg√∫rate de que **PC y m√≥vil est√°n en la misma red Wi‚ÄëFi**.

#### Pasos en Android Studio üíª (Pendiente Verificar)

1. Conecta el m√≥vil por USB **solo la primera vez** para que ADB lo reconozca.
2. Abre **Device Manager** ‚Üí pesta√±a **Pair using Wi‚ÄëFi**.
3. Elige emparejar por **QR** o **c√≥digo**:
   - Si usas c√≥digo:  
     - En el m√≥vil, en *Depuraci√≥n inal√°mbrica*, selecciona *Emparejar con c√≥digo*.  
     - En Android Studio, introduce el c√≥digo que aparece en el tel√©fono.
4. Una vez emparejado, Android Studio mostrar√° tu dispositivo como disponible v√≠a Wi‚ÄëFi.
5. Puedes desconectar el cable y ejecutar la app directamente.

-----

### Ejercicio 2

Sigue el codelab, pero cambia el texto para que aparezca tu nombre y el de Mar√≠a. Puedes ajustar los par√°metros de tama√±o para que quepa en la pantalla. Llama al proyecto **Ejercicio2**.

Feliz cumplea√±os o happy birthday es lo mismo, cualquiera vale.

[https://developer.android.com/codelabs/basic-android-kotlin-compose-text-composables](https://developer.android.com/codelabs/basic-android-kotlin-compose-text-composables)

Un truco aqu√≠ con el **preview** es que si queremos que nos muestre algo parecido a la simulaci√≥n, podemos pasarle la propiedad `showSystemUi = true` y al componente un `Modifier.padding(top = 24.dp)` para que no se solape con la barra de estado.

Si tir√°is por ah√≠, cuando cre√©is el Composable de GreetingText, al Text le ten√©is que pasar el modifier. Esto ser√≠a diferente a lo que se muestra en el codelab, pero es m√°s correcto. Luego cuando aparezca el column que envuelve a los dos texts, pues lo podemos mover ah√≠.

```kotlin
@Preview(showBackground = true, showSystemUi = true)
@Composable
fun BirthdayCardPreview() {
    Ejercicio2Theme {
        GreetingText("Android", modifier = Modifier
            .padding(top = 24.dp))
    }
}
```

```kotlin
@Composable
fun GreetingText(message: String, from: String, modifier: Modifier = Modifier) {
    Column (modifier = modifier) {
        Text(
            text = message,
            fontSize = 100.sp,
            lineHeight = 116.sp
        )
        Text(
        //Mas codigo
```

Tened tambi√©n en cuenta la diferencia entre lo que nos aparecer√° en el preview y lo que se mostrar√° en el emulador (AVD) o en el m√≥vil.

![Preview en AVD](img/T03/preview_avd.png)

Ten en cuenta que la plantilla de creaci√≥n es diferente. En el √∫ltimo paso (**Adopt good practice** se llama en ingl√©s) le pasamos el `padding` de `Scaffold` (innerPadding) ya no tenemos ning√∫n `Surface`.

```kotlin
Ejercicio2Theme {
    Scaffold(modifier = Modifier.fillMaxSize()) { innerPadding ->
        GreetingText(
            message = "Happy Birthday Maria!",
            from = "From Sergio",
            modifier = Modifier.padding(innerPadding)
        )
    }
}
```

Cuestiones a las que deber√©is prestar atenci√≥n:

- Qu√© el texto from se alinee a la derecha (el modifier de este text tendr√° un `.align(Alignment.End)`)
- Que el texto principal est√© centrado (se puede hacer con la propiedad `textAlign = TextAlign.Center` que nos indica codelab aunque se podr√≠a lo mismo con un modifier)
- Que nuestro componente ocupe toda la pantalla (pasarle en el modifier `fillMaxSize()`).

<img src="img/T03/ejercicio2_avd.png" alt="Ejercicio 2 AVD" width="30%">

-----

### Ejercicio 3

A partir del c√≥digo realizado en Ejercicio 2, crea un nuevo proyecto que llames Ejercicio3, copia el c√≥digo de Ejercicio2.

Aseg√∫rate de reemplazar los literales que contengan:

- ejercicio2 -> ejercicio3
- Ejercicio2 -> Ejercicio3

Deber√≠an ser unos 5 reemplazos, ya contin√∫a con el codelab para a√±adir una imagen de fondo.

[https://developer.android.com/codelabs/basic-android-kotlin-compose-add-images](https://developer.android.com/codelabs/basic-android-kotlin-compose-add-images)

<img src="img/T03/ejercicio3_preview.png" alt="Ejercicio 3 Preview" width="30%">

En este codelab nos habla de `Modifier` y contenedores (`Column`, `Row`, `Box`). Lee los siguientes art√≠culos como parte del ejercicio:

- [Android Layouts en Jetpack Compose](https://www.develou.com/android-layouts-en-jetpack-compose/)
- [Compose Modificadores de apariencia](https://www.develou.com/compose-modificadores-de-apariencia/)

Es interesante descargar el proyecto con los ejemplos y realizar pruebas:
[https://github.com/jamesreve/android-jetpack-compose.git](https://github.com/jamesreve/android-jetpack-compose.git)

-----

### Ejercicio 4

Crea un nuevo proyecto llamado **Ejercicio4** y crea tres ficheros kotlin (uno para compose article, otro para task manager y el √∫ltimo para compose quadrant) con las funciones composable que definan los ejercicios del siguiente Codelab. Intenta realizar la tarea sin consultar la soluci√≥n.

[https://developer.android.com/codelabs/basic-android-kotlin-compose-composables-practice-problems](https://developer.android.com/codelabs/basic-android-kotlin-compose-composables-practice-problems)

Puedes crear un nuevo fichero con el bot√≥n derecho sobre el paquete: New > Kotlin File/Class

Como se ha visto en los CodeLabs, estas funciones deben ser parametrizadas para poder ser reutilizadas. Por ejemplo, la firma del m√©todo para el primer ejercicio podr√≠a ser:

```kotlin
@Composable
fun ComposeArticle (
    image: Painter,
    title: String,
    text1: String,
    text2: String,
    modifier: Modifier = Modifier
)
```

-----

### Ejercicio 5

Crea una pantalla que muestre una tarjeta como la propuesta en el codelab:
[https://developer.android.com/codelabs/basic-android-kotlin-compose-business-card](https://developer.android.com/codelabs/basic-android-kotlin-compose-business-card)

![Ejercicio 5 AVD](img/T03/ejercicio5_avd.png)

Para conseguir que la imagen se muestre circular puedes usar `clip` de `Modifier`:
[https://developer.android.com/develop/ui/compose/graphics/images/customize#clip-image-shape](https://developer.android.com/develop/ui/compose/graphics/images/customize#clip-image-shape)

```kotlin
Image(
    painter = foto,
    contentDescription = null,
    contentScale = ContentScale.Crop,
    modifier = Modifier
        .size(150.dp) // Ajusta el tama√±o seg√∫n tus necesidades
        .clip(CircleShape)
)
```

Para los iconos de contacto, pod√©is utilizar `Icon`:

```kotlin
Icon(
    imageVector = Icons.Default.Phone, //icono seleccionado
    contentDescription = "tel√©fono",
    modifier = Modifier.size(24.dp),
    tint = MaterialTheme.colorScheme.primary
)
```

Es aconsejable crear 3 funciones:

1. Crear la funci√≥n principal de la pantalla con todos los par√°metros.
2. Crear una funci√≥n con la parte superior: Foto, nombre, trabajo.
3. Crear una funci√≥n con los datos de contacto.

Si lo has completado todo, ¬°enhorabuena! Tiene much√≠simo m√©rito arrancar con esto porque hay tantos componentes y atributos que abruma.

Para tu tranquilidad, es normal que al principio no tengas del todo claro por que pasan las cosas, pero poco a poco ir√°s entendiendo el paradigma declarativo y Jetpack Compose.
